<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <title>AJ Framework-å®ä½“ç±»å­—æ®µè„±æ•</title>
        <meta
            name="description"
            content="AJ Framework ä¸€ä¸ªåŸºäº SpringMVC æ„å»ºçš„è½»é‡çº§æ¡†æ¶ï¼Œæ—¨åœ¨å¢å¼º SpringMVC å¹¶ä½¿å…¶æ›´å…· SpringBoot çš„ç‰¹æ€§ã€‚å®ƒæ‹¥æœ‰è®¸å¤šå°å‹ç»„ä»¶ï¼Œéå¸¸æ˜“äºä½¿ç”¨ã€‚"/>
        <meta name="keywords" content="AJ Framework, ajaxjs, ajaxjs framework, java framework, web framewwork"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap&family=Noto+Sans+SC:wght@100..900&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" /> 
        <link rel="stylesheet" href="/style/docs/main.css"/>
        <link rel="icon" type="image/x-icon" href="/asset/aj-docs/logo.ico"/>
        <script src="/asset/docs/js/common.js"></script>
    </head>
    <body>
        <nav>
            <div>
                <div class="links">
                    <a href="/">ğŸ  Home</a>
                    |
                                    âš™ï¸ Source:
                    <a target="_blank" href="https://github.com/lightweight-component/SqlMan">Github</a>/<a target="_blank" href="https://gitcode.com/lightweight-component/SqlMan/overview">Gitcode</a>
                    |
                    <a href="/docs/common/contact">âœ‰ï¸ Contact</a>
                </div>
                <h1>
                    <img src="/asset/aj-docs/logo.png" style="vertical-align: middle;height: 45px;margin-bottom: 6px;" /> 
                    AJ Framework
                </h1>
                <h3>è½»é‡çº§ Java å¿«é€Ÿå¼€å‘æ¡†æ¶
                </h3>
            </div>
        </nav>
        <div>
            <menu>
                
                <ul>
                    <li class="selected">
                        <a href="/aj-docs">é¦–é¡µ</a>
                    </li>
                    <li>
                        <a href="/aj-docs/quick-start">å¿«é€Ÿå¼€å§‹</a>
                    </li>
                </ul>
                <h3>å¼€å§‹</h3>
                <ul>
                    <li>
                        <a href="pages/api/init.html">åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</a>
                    </li>
                    <li>
                        <a href="/aj-docs/init/controller">ç®€åŒ–æ§åˆ¶å™¨ä¸ºæ¥å£</a>
                    </li>
                    <li>
                        <a href="/aj-docs/init/global">ç»Ÿä¸€è¿”å›ã€ç»Ÿä¸€å¼‚å¸¸</a>
                    </li>
                    <li>
                        <a href="pages/api/package.html">æ‰“åŒ…ä¸éƒ¨ç½²</a>
                    </li>
                </ul>
                <h3>API åŠŸèƒ½</h3>
                <ul>
                    <li class="data">
                        <a href="/aj-docs/api/api-limit/">API é™æµ</a>
                    </li>
                    <li>
                        <a href="/aj-docs/api/api-encode/">API åŠ å¯†/è§£å¯†</a>
                    </li>
                    <li>
                        <a href="/aj-docs/api/api-security/">API å®‰å…¨</a>
                    </li>
                    <li>
                        <a href="/aj-docs/api/bean-validator/">Bean å®ä½“æ ¡éªŒ</a>
                    </li>
                </ul>
                <h3>å…¶ä»–æ¨¡å—</h3>
                <ul>
                    <li>
                        <a href="/aj-docs/misc/cache">ä½¿ç”¨å¤šçº§ç¼“å­˜</a>
                    </li>
                    <li>
                        <a href="/aj-docs/misc/desensitize">è„±æ•ç»„ä»¶</a>
                    </li>
                    <li>
                        <a href="/aj-docs/misc/trace">é“¾è·¯è·Ÿè¸ª</a>
                    </li>
                    <li>
                        <a href="/aj-docs/misc/dlock">åˆ†å¸ƒå¼é”ã€å»¶è¿Ÿæ¶ˆæ¯</a>
                    </li>
                </ul>
    
                <h3>Misc</h3>
                <ul>
                    <li><a href="/aj-docs/common/versions">Release History</a></li>
                    <li><a href="/aj-docs/common/contact">Contact</a></li>
                </ul>
            </menu>
            <article>
                <h1>å®ä½“ç±»å­—æ®µè„±æ•</h1>
<p>è„±æ•å°±æ˜¯ç°å®æŸäº›æ•æ„Ÿçš„å­—æ®µå®Œå…¨æš´éœ²æ•°æ®ï¼Œä½†åˆä¸èƒ½å®Œå…¨æ¶ˆå»ï¼Œä¿ç•™ä¸€éƒ¨åˆ†ä¿¡æ¯å³å¯åˆ¤æ–­ï¼Œå¸¸è§å¦‚å§“åã€æ‰‹æœºã€é‚®ç®±ã€ç”¨æˆ·åã€å¯†ç ç­‰å­—æ®µã€‚</p>
<p>è€ƒè™‘åˆ°ç©¿æ¢­äº Java çš„å®ä½“è¦ä¹ˆæ˜¯ Java Bean è¦ä¹ˆå°±æ˜¯ Mapï¼Œé’ˆå¯¹å®ä½“æ•°æ®å¤„ç†å³å¯ã€‚æ¥ç€æŠŠæ§å¥½åœ¨å“ªé‡Œè°ƒç”¨è¿™ä¸ªè„±æ•ç»„ä»¶ï¼Œæ¯”å¦‚ REST API çš„åœ¨è¿”å›å®ä½“ä¹‹å‰å¤„ç†å°±å¥½ï¼›è€Œ RPC çš„åˆä¸ä¸€æ ·ã€‚</p>
<p>è„±æ•å®ç°æ–¹å¼ä¹Ÿä¸éš¾ï¼Œæœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢å‡½æ•°å³å¯ã€‚ä½†å›´ç»•å®ä½“å­—æ®µå„ç§çš„æƒ…å†µï¼Œè€ƒè™‘å¾—å°±æ¯”è¾ƒå¤šäº†ã€‚</p>
<h1>ä½¿ç”¨æ–¹å¼</h1>
<h2>æºç </h2>
<p>ä»æºç ç©ºé—´ç›´æ¥ copy ä»£ç æ¥å£ï¼Œæ²¡æœ‰å…¶ä»–ä¾èµ–ã€‚</p>
<p><a href="https://gitcode.com/zhangxin09/aj-framework/tree/master/aj-framework/src/main/java/com/ajaxjs/desensitize">https://gitcode.com/zhangxin09/aj-framework/tree/master/aj-framework/src/main/java/com/ajaxjs/desensitize</a></p>
<p>å¾ˆç®€å•çš„å‡ ä¸ªç±»ï¼Œè½»é‡çº§ä¸ºç›®æ ‡ã€‚</p>
<h2>å®šä¹‰å®ä½“æ³¨è§£</h2>
<pre><code class="language-java">import com.ajaxjs.desensitize.DesensitizeType;
import com.ajaxjs.desensitize.annotation.DesensitizeModel;
import com.ajaxjs.desensitize.annotation.DesensitizeProperty;
import lombok.Data;

@Data
@DesensitizeModel
public class User {
    private String name;

    @DesensitizeProperty(DesensitizeType.PHONE)
    private String phone;

    private int age;
}
</code></pre>
<p>ä¸Šä¾‹ä½¿ç”¨äº† <code>@DesensitizeModel</code> è¡¨ç¤ºè¯¥ POJO è¦è„±æ•ï¼›<code>@DesensitizeProperty(DesensitizeType.PHONE)</code>è¯´æ˜è¦è„±æ•çš„å­—æ®µï¼Œä»¥åŠæ˜¯â€œæ‰‹æœºâ€çš„ç±»å‹ã€‚å…¶ä»–æ›´å¤šçš„ç±»å‹å‚è§æšä¸¾ï¼š</p>
<pre><code class="language-java">/**
 * è„±æ•ç±»å‹
 */
public enum DesensitizeType {
    DEFAULT(v -&gt; DataMask.PLACE_HOLDER),
    // æ‰‹æœºå·
    PHONE(DataMask::maskPhoneNumber),
    // é“¶è¡Œå¡å·
    BANK_CARD(DataMask::maskBankCard),
    // èº«ä»½è¯å·
    ID_CARD(DataMask::maskIdCard),
    // å§“å
    USERNAME(DataMask::maskChineseName),
    // email
    EMAIL(DataMask::maskEmail),
    //åœ°å€
    ADDRESS(v -&gt; DataMask.maskAddress(v, 0));

    public final Function&lt;String, String&gt; handler;

    DesensitizeType(Function&lt;String, String&gt; handler) {
        this.handler = handler;
    }
}

</code></pre>
<p>æ‰‹åŠ¨æ‰§è¡Œè„±æ•ï¼š<code>DeSensitize.acquire(body);</code>ã€‚</p>
<h2>å®šä¹‰æ§åˆ¶å™¨çš„æ³¨è§£</h2>
<p>ä½¿ç”¨<code>@Desensitize</code>å®šä¹‰åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸Šã€‚</p>
<pre><code class="language-java">@GetMapping(&quot;/user_desensitize&quot;)
@Desensitize
public User UserDesensitize() {
    User user = new User();
    user.setAge(1);
    user.setName(&quot;tom&quot;);
    user.setPhone(&quot;13711118120&quot;);

    return user;
}
</code></pre>
<p>åœ¨ç»Ÿä¸€è¿”å›çš„<code>ResponseBodyAdvice</code>ä¸Šï¼Œå¢åŠ ä¸€è¡Œåˆ¤æ–­ã€‚</p>
<pre><code class="language-java">@RestControllerAdvice
@Component
public class GlobalResponseResult implements ResponseBodyAdvice&lt;Object&gt; {

    @Override
    public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType, ServerHttpRequest request, ServerHttpResponse response) {
        Method method = returnType.getMethod();
        assert method != null;

        if (method.isAnnotationPresent(Desensitize.class)) // åˆ¤æ–­è¦æ‰§è¡Œè„±æ•
            body = DeSensitize.acquire(body);

        ResponseResultWrapper responseResult = new ResponseResultWrapper();
        responseResult.setStatus(1);
        responseResult.setData(body);

        return responseResult;
    }
}
</code></pre>
<p>è¿”å›ç»“æœå¦‚ï¼š</p>
<pre><code class="language-json">{
    &quot;status&quot;: 1,
    &quot;errorCode&quot;: null,
    &quot;message&quot;: &quot;æ“ä½œæˆåŠŸ&quot;,
    &quot;data&quot;: {
        &quot;phone&quot;: &quot;137*****8120&quot;,
        &quot;name&quot;: &quot;tom&quot;,
        &quot;age&quot;: 1
    }
}
</code></pre>
<h1>ç±»è¯´æ˜</h1>
<ul>
<li>DeSensitizeUtilsï¼šè¿™ä¸ªç±»å¯¹å®ä½“è¿›è¡Œè„±æ•åè¿”å›çš„æ˜¯åŸæ¥çš„å®ä½“å¯¹è±¡ï¼Œå®ƒç›´æ¥åœ¨åŸå§‹å¯¹è±¡ä¸Šè¿›è¡Œæ“ä½œï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</li>
<li>SensitizeUtilsï¼šè€Œè¿™ä¸ªç±»åˆ™åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ï¼ˆæˆ–é›†åˆï¼‰ï¼Œå¹¶åœ¨è¿™ä¸ªæ–°å¯¹è±¡ä¸Šåº”ç”¨è„±æ•è§„åˆ™ã€‚è¿™æ„å‘³ç€åŸå¯¹è±¡ä¿æŒä¸å˜ï¼Œè€Œè¿”å›çš„æ˜¯ä¸€ä¸ªç»“æ„ç›¸åŒä½†å€¼è¢«è„±æ•å¤„ç†è¿‡çš„æ–°å¯¹è±¡ã€‚</li>
</ul>
<h1>åŒç±»å¼€æº</h1>
<ul>
<li>https://gitee.com/strong_sea/sensitive-plus https://www.cnblogs.com/nuccch/p/18148298 ä½¿ç”¨äº†<code>MappingJackson2HttpMessageConverter</code>è¿™ç‚¹ä¸é”™ï¼ŒåŒæ—¶ä¹Ÿæ¯”è¾ƒå…¨é¢ï¼Œè¿˜æ”¯æŒæ—¥å¿—è„±æ•ï¼Œå¯æ˜¯ä»£ç ç»„ç»‡å¤ªåˆ†æ•£äº†</li>
<li>https://github.com/chenqi92/alltobs-desensitization-all</li>
<li>https://github.com/mingyang66/spring-parent/tree/master/emily-project/oceansky-desensitize ä»£ç ç®€æ´æ¸…æ™°</li>
<li>https://gitee.com/l0km/beanfilter å¤§ç¥ä½œå“ï¼ŒåŠŸèƒ½å…¨é¢ï¼ŒåŒ…æ‹¬ RPC çš„</li>
</ul>
<p>æ›´å¤æ‚çš„å‚è€ƒè¿™ä¸ª<a href="https://www.secrss.com/articles/13856">ã€Šå¤§æ•°æ®éšç§ä¿æŠ¤å…³é”®æŠ€æœ¯è§£æï¼šæ•°æ®è„±æ•ã€åŒ¿ååŒ–ã€å·®åˆ†éšç§å’ŒåŒæ€åŠ å¯†ã€‹</a>ã€‚</p>

            </article>
        </div>

        <footer>
    SqlMan, a part of <a href="https://framework.ajaxjs.com" target="_blank">AJ-Framework</a> open source. Mail:
    frank@ajaxjs.com, visit <a href="https://blog.csdn.net/zhangxin09" target="_blank">my blog(In Chinese)</a>.
    <br />
    <br />
     Copyright Â© 2025 Frank Cheung. All rights reserved.
</footer>
    </body>
</html>